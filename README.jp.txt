(UTF8 encoding)
*********************************************************************************************
近距離無線通信を使い、サーバーが不要な、仲間内で遊ぶ、"麻雀"対戦アプリです。
多少は考えるロボットを相手に一人遊びもできます
*****
焼き鳥、割れ目、トビもあり、4人揃わなくても遊べます。中断・再開もできます。
リアル感を重視しました、コミュニケーションツールとして利用してください。
点数計算はオプションです、ローカル役は自由です。
"１飜縛り"のチェックもオプションですので誤ロンのチョンボありにできます。
端末は 短長360dip 以上あればスマホでもOK、タブレットがおすすめです。
接続はBluetooth(レガシーモード) か Wifiダイレクトを使用。

ご意見、ご要望、不具合発見などは sakachin2@yahoo.co.jp まで

V1.18 : 2021/11/26
        .チーの副露がおかしい不具合の修正
        .設定にフリテンリーチはできないオプションを追加
*********************************************************************************************
V1.18 : 2021/11/26
        .局の終了確認ダイアログに結果の合計点数を表示
        .設定にフリテンリーチはできないオプションを追加
        .チーの副露がおかしい不具合の修正
V1.17 : 2021/11/19
        .ロボット強化、積極的に喰いを入れる
        .不具合
         -両面でないのに誤って"喰い変えエラー"とすることがある
         -役の判定を誤ることがある
V1.17 : 2021/11/19
        .クラッシュレポート対応（Appがデストロイ+リスタートすると発生、リスタートはサポートしない）
        .ロボットは槍槓などの偶然役は２飜縛りでなくても後付け有りでなければ１飜縛り対象外とする
        .ロボット強化
         -大/小三元のときはシャンテンダウンでもポンチ―する
         -パオがかかっている状況では立直はしない
         -喰いの判断、捨て牌の選択で三色/一通/タンヤオ/チャンタを意識する
         -数牌を鳴くのは、三色/一通/タンヤオ/チャンタ/一色手がないときは字牌で役が確定してる場合に限る
         -三色/一通のとき先付ルールを意識して喰いをいれる
         -鳴いてテンパイするときは、テンパイ形が２飜縛りも含めて役があるか確認する
         -最初の鳴きを入れるときは２飜縛りを確認する
         -タンヤオ完成メンツがあるときはチャンタ志向しない
         -字牌ですでに１飜確定していたら、ドラを考慮して鳴きを入れる
         -大/小三元志向は暗刻が１つあるときとし、チャンタは無視、３元牌の槓はしない
         -１色手のとき早いタイミングでの喰いを入れるときドラ数を考慮するが、ドラはその色のドラだけにする
         -早い段階での１色手志向は３シャンテンまでとする
         -トイトイ志向の時はチーはしない
         -面前のとき数牌の槓はしない、他者の立直があるときは槓しない
         -１色志向の時はシャンテンダウンでも喰いを入れる、またポンよりチーを優先する
         -トイトイ志向は刻子１個有りを条件とする
         -一色志向は他の色の完成メンツなしを条件とする
         -自摸の時、役牌がある、あるいは面前のときは槓する
         -ロボットも槍槓で上がる
         -四暗刻狙いの時はポンを当初は控える
         -残りの牌数が少ないとき上りは断念し捨て牌は立直の現物を選ぶ
         -チャンタ志向を決めるとき4/5/6の枚数を考慮する
         -タンヤオ志向を決めるとき字牌の面子がないかチェックする
         -一色志向の時字牌は１枚か複数枚かを考慮する

        .不具合
         -第一ラウンド開始前に接続エラーが発生するとクライアント端末でバックボタンでトップ画面に戻れない
         -トップ画面のメッセージ出力行が２行になって溢れることがある
         -両面でないのに誤って"喰い変えエラー"とすることがある
         -最初の打牌までドラが意識されず、鳴きの判定に影響していた
         -チャンタ面子を鳴いているのにタンヤオを狙おうとする、またはその逆
         -1/9牌が頭の時混チャンタと判断しない
         -チーを含む和了で上がり役の判定を誤ることがある
         -シャンテン計算の誤りで捨て牌の選択を誤ることがある
         -暗槓の伏牌に赤ドラを表示する
         -喰うときの和了形の評価に捨て牌のドラが考慮されてなかった
         -後付けなしの時でも槍槓の１飜だけで和了通知する
         -ロボットのロン牌が人のポンにもなるとき、ポンの通知が出て次の局でも消えない
         -頭がタンヤオなのに混チャンタと判断する
         -面子の組み合わせで面子を見落とすjことがあり、部分面子で役を判断してしまう
         -残り枚数がないときフリテンと判断しない
         -日本語環境の時ウマのランクが指定より１アップする
         -鳴かれた牌を残すオプションの時クライアントで牌に影がかからない
*********************************************************************************************
V1.16 : 2021/10/05
        .個人設定でデバイス内にある楽曲を自由にBGMに設定できる
        .スマホの細長デバイス画面対応
        .Android-R(11)対応
           Android-11で外部ストレージの仕様が変更になりました。
           (再)インストールにより、ゲームデータの保存先を設定する必要があります。
           表示されるダイアログで 固有のフォルダー：eMahjongを設定してください。
           初めての場合は、そのダイアログでフォルダーを作成してください。
           最初のAndroid-11版の再インストールの時のみ既存の履歴、ルールファイルが移行できます。
V1.16 : 2021/10/05
        .個人設定でゲームボタン配列を左利き用に左右反転できる
        .個人設定でデバイス内にある楽曲を自由にBGMに設定できる
        .履歴のバランスシートで同じメンバーでのゲームの詳細を表示
        .Android-R(11)対応
           Android-11で外部ストレージの仕様が変更になりました。
           (再)インストールにより、ゲームデータの保存先を設定する必要があります。
           表示されるダイアログで 固有のフォルダー：eMahjongを設定してください。
           初めての場合は、そのダイアログでフォルダーを作成してください。
           最初のAndroid-11版の再インストールの時のみ既存の履歴、ルールファイルが移行できます。
        .ペンディングゲームのsg.rulefileをゲームが終了したら削除する
        .スマホの細長デバイス画面対応
        .(Bug)ルールダイアログで何か修正をしてOKしないと、1人遊びができない
*********************************************************************************************
V1.15 : 2021/08/23
        .タブレットより画面幅が小さいスマホ(360dipまで)に対応
        .不具合
         -他のプレーヤーが自摸中に"とに和"を許してしまう
*********************************************************************************************
V1.14 : 2021/08/01
        .設定の操作、待ち時間に0.5秒単位を追加。省略値も２秒-->１秒に変更
        .対戦モードの時もオプションでポン/カン/チー/ロンを通知する
        .１人遊びのでも片上がり、フリテン、先付ルール違反をチェックする
        .１人遊びのでも"ロン取り消し"オプションを適用
        .１人遊びのとき和了通知と、和了確認を１回和了ボタンですませる
        .上がり確認のダイアログでの役の表示順を標準に合わせる。役、自摸、役牌、ドラ。
        .暗槓、加槓は通知しない
        .ロボットのツモ切りオプションは廃止
        .ロボットの強化
         -役牌＋ドラ>=2 のとき、テンパイするならポン、チーする
         -打牌の時、点数が同じなら役の高い方を選択する
         -他人の立直があるときは槓しない
         -カンチャン待ちは１０回自摸までは両面手替わりを待つ
         -トイトイ志向の判断を正す
         -トイトイ、一色手のときは早鳴きする
         -単騎待ちは役、残り牌数が同じなら字牌を選ぶ
         -立直で複数打牌候補があるとき、1つでもＯＫがあれば他にＮＧがあっても立直する
         -役満の時はリーチしない
         -七対子でもタンヤオ、チャンタ、一色の複合を意識する
         -１度鳴いたあとなら、テンパイするなら鳴く
         -２シャンテンのときペンチャン、カンチャンは喰う
         -ドラが捨てられたら可能ならポンする
         -チーするとき赤ドラを優先して副露する
         -オープン立直がかかっているときはロボットは立直をしない
         -早い時期ではカンチャンは両面になるのを待って立直する
         -一旦ポン、チーしたら後は役の志向を変えない
         -トイトイ志向の時、刻子と対子では評価を変える
         -チャンタ面子が１つでもあればタンヤオ志向とはしない
         -オーラス近くでトップの時、役牌は１鳴きする
         -オーラス近くで8000 以上マイナスの時は役牌の１鳴きより役志向を優先する
         -七対子よりトイトイを優先する
         -順子が２つあればチートイ志向とはしない
         -シャンポン待ちの早い時期には両面に手替わりが期待できる場合は立直を控える
         -一色手志向の時他の色は鳴かない
         -東風戦、焼き鳥ありの時は役字牌は１鳴きする
        .不具合
         -１人遊びの時の槓が通知されない
         -１人遊びのとき十三不搭、十四不搭が"和了形でない"のエラーになる
         -第一自摸で槓をコールするとトラブル
         -明槓のときのドラ開示オプションの設定が無視されていた
         -シャンテン<２のとき、タンヤオ志向が設定されてなかった
         -ダブル立直のときドラが無視されていた
         -立直のフリテンチェックが直前の捨て牌を含んでいた
         -テンパイ、立直のときの捨て牌判断で赤ドラが捨て牌の時もドラ１と見ていた
         -混チャンタの判定の誤り
         -クライアンの和了メッセージがロボットの自摸＋打牌に追い越されるとハングする
         -槍槓が通知されない
         -槍槓後の和了が "あなたの番ではありません" となる
         -"国士で暗槓を槍槓できる"オプションが"No"のとき暗槓をコールするとハングする
         -嶺上開花が通知されない
         -１人遊びのとき和了を取り消すと打牌が"オレンジボタンを押せ"のエラーとなる
         -ロボット捨て牌選択で和了形の評価は縛りを満たす場合のみドラの数を加味するのが正しい
         -チャンタ志向の決定で地の評価が抜けていた
         -立直後＋ツモが通知されない
V1.13 : 2021/06/21
        ."焼鳥"オプションををロボット入りゲームにも適用
        .先付/中付け/後付けルールの詳細を決めてに適用します。（設定-->役のヘルプを参照）
         和了ボタンを押したときに違反があれば警告します
        .空テンパイのリーチを通す。
        .立直を宣言したとき、フリテン、２飜縛りをチェックする。
         （エラーになってもメニューの"とにかくリーチ"から強制的にリーチをかけることはできます）
        .画面の向きの逆向きサポート。
        .(不具合)
         -刻子自摸の時の符の計算に誤りがあった
         -見方を変えると高得点になるケース、例えば、111222332は３暗刻より、純チャンとみなせる場合がある。
         -天和でトラブることがある
         -赤ドラありで、テンパイチェックをONにすると立直をかけられない
         -対戦と一人遊びの切り替えが立ち上げ直さないとうまくいかないことがある。
V1.12 : 2021/05/06
        .一人遊びの時、ゲームオーバーの時はBackボタンでもトップ画面に戻れるようにする
        ."とにかく和了"ボタンの表示オプションを個人設定から操作設定に変更
        .特定のメンバーの組み合わせに限定した貸借表示を可能にした
        .通知モードで自摸の時、縛りを考慮して通知する
        .一人遊びの通知モードでは人間も二飜縛りをチェックする
        .偶然役を二飜縛り役の対象から外す
        .ロボットと一人遊びの時の人間では自摸でないときはフリテン、片上がりルールをチェックする
        .後付けでないときツモなら片上がりをチェックする
        .二飜縛りのとき、ロボットは役牌のポンは避ける
        .ギブアップモードはテンパイしたらリセットする
        .対戦モードの時もロボットのダブロンを許す。
        .(不具合)
         -天和、地和で和了宣言したとき対子が２つあると"和了形でない"のエラーになる
         -ロボットの和了に嶺上開花、海底、河底の役が付かない
         -ロボットが十三不搭、十四不搭であがれない
         -ロボットが大(小)三元のインテントがポン済を考慮してなかった
         -ロボットのダブル立直が二飜縛りの対象に考慮されていなかった
         -ロボットが一色狙いの時チーしない
         -平和ツモありのとき平和ツモの点数計算のバグ
         -ロボットがシャンテンアップの判断の誤りでチーしない
         -対戦モードでロボットと人間がダブロンの時ロボットのロン処理が人間を追い越すことがある
         -フリテンチェックはツモではなく打牌の時点から調べる
         -チーした時の打牌で喰い変え違反と言われることがある
V1.11 : 2021/04/09
        .一人遊びの時、ロン、ポン、カン、チーの可能性があれば通知するモードを追加。ロボットの動作が早くなります
        .一人遊びの時、人とロボットのダブロンを認める（対局の時はロボットは人がロンを宣言していればロンしません)
        .履歴のサマリー（プレーヤー別のポイントの合算）表示機能の追加
        .(不具合)
         -リーチ牌に対してダブロンがあったときリーチ牌が縦横二重表示される、また名札の上がりカラー表示が出ない
         -１人遊びの時で、人とロボットのダブロンのとき得点要求画面が１つしか表示されない
         -ロボットが自摸し和了形になり１飜縛りで上がれないときハングする
         -役設定でオープン立直のロボットオプションが無視される
         -一盃口があるとき誤って三色と判定することがある
V1.10 : 2021/03/20
        .スマートロボット
        .(BUG)BGMをオフにすると"問題が発生"
        .(BUG)人和が無視される
        .一人遊びモード
        .(BUG)ロボット入りゲームの時トビの判断を誤る
        .(BUG)河底ロンできない
        .(BUG)海底以外を打牌すると流局処理ダイアログがアップしない、メニューからは流局できる
        .流れたとき聴牌を判定する
        .形式テンパイの省略値をすべて有にする
        .(BUG)混一色の判定を誤る
        .(BUG)リーチ牌をロンした時自分のリーチの１飜がつかない
        .ロボット名を変更、４ から今日の日付で選ぶ
        .(BUG)履歴からのゲーム再開の第一自摸がそのときの親でない
        .(BUG)履歴からのゲーム再開の繰り越しリーチ棒の数の誤り
        .(BUG)ゲーム中のBGM停止が効かない
        .BGM 追加、南１局でえぶり小学校、ファイナルゲームで水中
V1.09 : 2020/11/21
        .Android10 対応
        .接続障害処理のバグ対処
V1.08 : 2020/11/07
        .groguard でインストールトラブルあり
V1.04 : 2020/11/05
        .リーチ宣言のときのテンパイ確認をオプションで追加
        .(Bug)十三不搭、一気通貫、ピンフの判定を誤るケースがあった
        .(Bug)オープン立直の１飜の追加忘れ
V1.03 : 2020/10/19
        .１飜縛りのチェック、アプリで点数計算をオプションで追加
        .設定により喰い変え違反をチェックする
        .(Bug)槓入り七対子が認められない
        .(Bug)接続のダイアログでID名を変更すると直後の接続で"問題発生"がでることがある。
V1.02 : 2020/05/09
        .(Bug)クライアントがアプリをリスタートするとき、ルール変更をしていると再接続できない
        .BGMオプションの追加
V1.01 : 2020/04/11 (初版)
