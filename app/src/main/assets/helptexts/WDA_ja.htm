WiFiダイレクトを使用する場合、アンドロイドのバージョンによってはアンドロイドの設定が必要です。
例えばAndroid8(Oreo)のデバイスでは以下の位置情報の設定が必要です。
<BR>
設定、Google、アカウントサービス、位置情報。"現在地にアクセス"をオン
<BR>
設定、アプリと通知、アプリ、ｅ雀、権限。"現在地"をオンにする
<BR>
----------------------------------------------------------------------
<BR>
<B>
サーバー役となる人を決め、まず他の１台と接続します。
２台が同時に"探索"を押し、利用可能が出たら、サーバーは"サーバーになる"をオンにして、"ペア設定"を押します。
ペア設定済みになったら、サーバーが"接続受付"が押した後、クライアントが"接続"を押し接続が完了します。
他の端末も同様にサーバー端末に対し、両方から"探索"、サーバーから"ペア設定"、クライアントから"接続"を繰り返します。
</B>
<BR>
----------------------------------------------------------------------
<BR>
１行目に自分の<BIG><B>デバイス名</B></BIG>が表示されています
<BR>
デバイス名はアンドロイドの<B>設定</B>・<B>WiFi</B>・<B>WiFiダイレクト</B>で変更できます。
同じタイプの他の端末と重ならないように変更してください。
<BR>
<BIG><B>ID名</B></BIG>にはユニークな自分の名前を８文字以内で設定してください。
（Bluetooth接続のID名と共通です。） 
雀卓上に名札として表示されます。接続のない状態でのみ変更できます。
<BR>
尚、<B>履歴</B>から中断した対局を<B>再開</B>する場合には、ID名が同じである必要があります。
<BR>
<BR>
<BIG><B>接続中のメンバー</B></BIG>： 
接続済のメンバーの<B>ID名</B>を表示します
<BR>
<BR>
<BIG><B>サーバーになる</B></BIG>：
<B>ペア設定</B>を押す前にサーバーとしたい端末でのみチェックを入れて、その端末からペア設定してださい。
一度ペア設定されると誰がサーバーだったか記憶されているので、期待どうりにはならない可能性もあります。
その場合、この設定が自動設定されチェックは変更できません。
記憶を削除するには、設定ボタンからシステム設定に入り DIRECT-x-y の項目を削除する必要があります。(x,yは自分と相手の識別子)
<BR>
<BR>
<BIG><B>中段のボタン列</B></BIG> 
<BR>
最初サーバーとする端末と他の１つの端末でペア設定します。両方から同時に<BIG><B>探索</B></BIG>してください。
<B>ペア設定済み</B>と<B>利用可能</B>のデバイスが<B>デバイスのリスト</B>に表示されます。
探索には多少の時間がかかります。
<BR>
探索ができない場合は<BIG><B>設定</B></BIG>ボタンからアンドロイドの設定に入ってWiFiをOff/Onしてみてください。
サーバー1台、他はクライアントの構成を確認してください。
最終的には電源のOff/On が必要な場合もあるかもしれません。
<BR>
<B>デバイスのリスト</B>に接続先のデバイス名がでたとき、
そのデバイスが"利用可能"の場合速やかにペア設定してください。時間がたつと探索のやり直しになります。
<BR>
Bluetoothではペア未設定でも"接続"でペア設定されますがWiFiダイレクトでは先にペア設定してください。
<BR>
"利用可能"の場合、サーバーから<BIG><B>ペア設定</B></BIG>ボタンを押します。
許可を求めるダイアログが出た場合は許可を与えてください。
時間がかかるようでしたら、"ペア設定中"のダイアログをキャンセルして、
もう一方の端末から<B>ペア設定</B>してみてください。
"招待されました"のまま進まないようなら、その端末を"ペア解除"してやり直してみてください。
"設定"からアンドロイドの設定に入ってWifiダイレクトの接続履歴を削除すると接続(ペア設定)できる場合もあります。
ペアリング要求中に相手のダイアログのデバイスリストから要求側のデバイスが消えたら、相手側で再度"探索"を押してください。
<BR>
"ペア設定済"になるとどちらがサーバーか決定していて、デバイス名の横に"サーバー"あるいは"クライアント"と表示されます。
（探索完了時に既にペア設定済の場合はその探索時点でサーバーは決定しています。接続処理をしてください。）
<BR>
サーバーには<BIG><B>接続受付</B></BIG>ボタンが現れます。
<BR>
サーバーが接続受付を押した後、クライアントが<BIG><B>接続</B></BIG>を押します。
<BR>
接続が完了すると<B>接続中のメンバー</B>にID名が表示されます。
<BR>
ペア設定はできているが接続が失敗する場合は、ペア解除、ペア設定からリトライしてみてください。
<BR>
他のクライアントとは同じ要領でサーバーとなった方のデバイスと順にペア設定、接続をしてください。
<BR>
メンバーが揃ったらダイアログを閉じてサーバーから<B>対局</B>を始めます。
<BR>
<BR>
<BIG><B>デバイスのリスト</B></BIG> 
"ペア設定"済みと"検索"で見つかったデバイス("利用可能")が表示されます
<BR>
<BIG><B>ペア解除</B></BIG>は"ペア設定済み"と"招待されました"を"利用可能"に戻します。
ペア設定をリトライするときに使用します。
尚、サーバーでの"ペア解除"はすべてのペアを解除します。
<BR>
<BR>
----------------------------------------------------------------------
<BR>
ゲーム中に通信障害が発生したときの再接続の場合、
接続できたら"ゲーム再開"か"中断・精算"を選択します。
<BR>
<BIG><B>ゲーム再開</B></BIG>：（サーバーのみ）ゲームを続行します。
<BR>
障害発生のタイミングによっては、うまく"続行"できない場合もあります。その場合はあらためて、"中断・精算"してください。
<BR>
<BIG><B>中断・精算</B></BIG>：再接続ができない場合などゲームを続行を望まない場合は中断・精算します。              
<BR>
中断・精算ダイアログでは、<B>保存・中断</B>するか<B>精算</B>するかを選択します。いずれにしてもその局はなかったものとします。
<BR>
精算の場合ルール設定、操作、中断処理、"接続障害の罰金"を科されます。
<BR>
誤ってダイアログを閉じてしまった場合はメニューの<B>_Connection _failure</B>から再表示できます。
<BR>
<BR>

<SMALL>WDA 2023/01/26</SMALL>
